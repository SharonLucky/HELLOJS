<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var coder = {
        name: 'Shock',
        friends: ['Rocky', 'Bob'],
        logHiToFriends:function(){
            'use static'
            this.friends.forEach(function(friend){
                console.log(this.name+ ' say hi to '+ friend);
            },this)//注意这个this，如果不添加这个参数，你可以猜测会发生什么
        }
    };
    coder.logHiToFriends()

    var funcs=[];
    for(var i=0;i<10;i++){
        funcs.push(function (value) {
            return function() {
                console.log(value);
            }
        }(i))
    }
    funcs.forEach(function(func) {
        func();     // 输出数值 "10" 十次
    });


    var User = {
        count: 1,

        getCount: function() {
            return this.count;
        }
    };

    console.log(User.getCount()); // 1

    var func = User.getCount;
    //var func = User.getCount.bind(User);
    console.log(func()); // what?结果为undefined





    function fn() {
        this.a = 0;
        this.b = function() {
            alert(this.a)
        }
    }
    fn.prototype = {
        b: function() {
            this.a = 20;
            alert(this.a);
        },
        c: function() {
            this.a = 30;
            alert(this.a);
        }
    }
    var myfn = new fn();
    myfn.b();
    myfn.c();



    //为了保证页面输出安全，我们经常需要对一些特殊的字符进行转义，请写一个函数escapeHtml，将<, >, &, “进行转义。字符转义
    function escapeHtml(str) {
        return str.replace(/[<>"&]/g,function(match) {
            switch (match){
                case "<":return "&lt;";
                case ">":return "&gt;"
                case "&":return "&amp;"
                case "\"":return "&quot;"
            }
        })
    }

    //用js实现随机选取10–100之间的10个数字，存入一个数组，并排序。
    var iArray = [];
    function getRandom(istart, iend){
        var iChoice = Math.abs(istart - iend +1);
        return Math.floor(Math.random() * iChoice + istart);
    }
    for(var i=0; i<10; i++){
        iArray.push(getRandom(10,100));
    }
    iArray.sort();
    iArray.reverse();

    //把两个数组合并，并删除第二个元素
    var array1 = ['a','b','c'];
    var bArray = ['d','e','f'];
    var cArray = array1.concat(bArray);
    cArray.splice(1,1);//["b"]

    //有这样一个URL：http://item.taobao.com/item.htm?a=1&b=2&c=&d=xxx&e，请写一段JS程序提取URL中的各个GET参数(参数名和参数个数不确定)，将其按key-value形式返回到一个json结构中，如{a:’1′, b:’2′, c:”, d:’xxx’, e:undefined}。
    function serilizeUrl(url) {
        var result = {};
        url = url.split("?")[1];
        var map = url.split("&");
        for(var i = 0, len = map.length; i < len; i++) {
            result[map[i].split("=")[0]] = map[i].split("=")[1];
        }
        return result;
    }


    for(var i=1;i<=3;i++){
        setTimeout(function(){
            console.log(i);
        },0);
    };//444
    for(var i=1;i<=3;i++){
        setTimeout((function(a){  //改成立即执行函数
            console.log(a);
        })(i),0);
    };//1 2 3



    //写一个function，清除字符串前后的空格。（兼容所有浏览器）
    if(!String.prototype.trim){
        String.prototype.trim=function(){
            return this.replace(/^\s+/,"").replace(/\s+$/,"")
        }
    }
    // test the function
    var str = " \t\n test string ".trim();
    alert(str == "test string"); // alerts "true"

    //.实现一个函数clone，可以对JavaScript中的5种主要的数据类型（包括Number、String、Object、Array、Boolean）进行值复制
    // 方法一：
    Object.prototype.clone = function(){
        var o = this.constructor === Array ? [] : {};
        for(var e in this){
            o[e] = typeof this[e] === "object" ? this[e].clone() : this[e];
        }
        return o;
    }

    //方法二：
    /**
     * 克隆一个对象
     * @param Obj
     * @returns
     */
    function clone(Obj) {
        var buf;
        if (Obj instanceof Array) {
            buf = [];                    //创建一个空的数组
            var i = Obj.length;
            while (i--) {
                buf[i] = clone(Obj[i]);
            }
            return buf;
        }else if (Obj instanceof Object){
            buf = {};                   //创建一个空对象
            for (var k in Obj) {           //为这个对象添加新的属性
                buf[k] = clone(Obj[k]);
            }
            return buf;
        }else{                         //普通变量直接赋值
            return Obj;
        }
    }


    //消除一个数组里面重复的元素
    //方法1
    var arr=[1,2,3,3,4,4,5,5,6,1,9,3,25,4];
    function deRepeat(){
        var newArr=[];
        var obj={};
        var index=0;
        var l=arr.length;
        for(var i=0;i<l;i++){
            if(obj[arr[i]]==undefined)
            {
                obj[arr[i]]=1;
                newArr[index++]=arr[i];
            }
            else if(obj[arr[i]]==1)
                continue;
        }
        return newArr;

    }
    var newArr2=deRepeat(arr);
    alert(newArr2); //输出1,2,3,4,5,6,9,25

    //方法2
    function unique(arr){
        var len=arr.length;
        var temp=[];
        for(var i=0;i<len;i++){
            if(temp.indexOf(arr[i])==-1){
                temp.push(arr[i])
            }
        }
        return temp
    }
    console.log(unique(arr))

    //小芒和小贤一样，原来也是一条可爱的小狗，可是突然有一天疯了(MadDog)，一看到人就会每隔半秒叫一声(wow)地不停叫唤(yelp)。请根据描述，按示例的形式用代码来实。（继承，原型，setInterval）
    function Dog() {
        this.wow = function() {
            alert('Wow');
        }
        this.yelp = function() {
            this.wow();
        }
    }
    function MadDog() {
        this.yelp = function() {
            var self = this;
            setInterval(function() {
                self.wow();
            }, 500);
        }
    }
    MadDog.prototype = new Dog();

    //for test
    var dog = new Dog();
    dog.yelp();
    var madDog = new MadDog();
    madDog.yelp();

    //已知数组 var stringArray = ["This", "is", "Baidu", "Campus"];，Alert出”This is Baidu Campus”
    var stringArray = ["This", "is", "Baidu", "Campus"];
    stringArray.join(" ")

    //已知有字符串foo="get-element-by-id",写一个function将其转化成驼峰表示法”getElementById”
    function combo(msg) {
        var arr=msg.split("-");
        for(var i=0;i<arr.length;i++){
            arr[i]=arr[i].charAt(0).toUpperCase()+arr[i].substr(1,arr[i].length-1)
        }
        msg=arr.join("")
        return msg;
    }
    combo("get-element-by-id")

    //var numberArray = [3,6,2,4,1,5]; 实现倒排，排序
    var numberArray = [3,6,2,4,1,5];
    numberArray.sort(); //[1, 2, 3, 4, 5, 6]
    numberArray.reverse();//[6, 5, 4, 3, 2, 1]

    //如何消除一个数组里面重复的元素？
    var myArray=[1,5,7,5,8,5,9,8,3];
    myArray.filter(function(elem, pos,self){//elem是这一项元素，pos是这一项所在的位置，self指的是执行filter的数组
        return self.indexOf(elem)== pos;
    })

    //理解下sort排序的原理
    var arr = [11,2,28,5,8,4]
    arr.sort(function(a,b){return a-b})

    //apply() 和call()区别
    function add(a,b)
    {
        alert(a+b);
    }
    function sub(a,b)
    {
        alert(a-b);
    }
    //用 add 来替换 sub，add.call(sub,3,1) == add(3,1) ，所以运行结果为：alert(4);// 注意：js 中的函数其实是对象，函数名是对 Function 对象的引用。
    add.call(sub,3,1);

    function Animal(){
        this.name = "Animal";
        this.showName = function(){
            alert(this.name);
        }
    }
    function Cat(){
        this.name = "Cat";
    }
    var animal = new Animal();
    var cat = new Cat();
    //通过call或apply方法，将原本属于Animal对象的showName()方法交给对象cat来使用了。
    //输入结果为"Cat"
    /* call 的意思是把 animal 的方法放到cat上执行，原来cat是没有showName() 方法，现在是把animal 的showName()方法放到 cat上来执行，所以this.name 应该是 Cat*/
    animal.showName.call(cat,",");
    //animal.showName.apply(cat,[]);

    //实现继承
    function Animal(name){
        this.name = name;
        this.showName = function(){
            alert(this.name);
        }
    }
    function Cat(name){
        Animal.call(this, name);
    }
    //Animal.call(this) 的意思就是使用 Animal对象代替this对象，Cat中就有Animal的所有属性和方法，Cat对象就能够直接调用Animal的方法以及属性了.
    var cat = new Cat("Black Cat");
    cat.showName();


    function a(x){
        return function b(y){
            return y+x++
        }
    }

    var a1 = a(10)
    var a2 = a(20)

    a1(10)
    a2(10)








</script>
</body>
</html>